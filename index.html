<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Recuerdos Dorados</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><defs><linearGradient id=%22gold%22 x1=%220%22 y1=%220%22 x2=%22100%22 y2=%22100%22><stop offset=%220%%22 stop-color=%22%23b38728%22/><stop offset=%2250%%22 stop-color=%22%23fcf6ba%22/><stop offset=%22100%%22 stop-color=%22%23b38728%22/></linearGradient></defs><rect width=%22100%22 height=%22100%22 rx=%2215%22 fill=%22%230f172a%22/><text x=%2250%22 y=%2275%22 font-size=%2260%22 font-family=%22Arial, sans-serif%22 font-weight=%22bold%22 text-anchor=%22middle%22 fill=%22url(%23gold)%22>50</text><circle cx=%2250%22 cy=%2250%22 r=%2248%22 fill=%22none%22 stroke=%22url(%23gold)%22 stroke-width=%223%22/></svg>" type="image/svg+xml">
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Fuentes Elegantes -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Montserrat:wght@300;400;600&display=swap" rel="stylesheet">
    <!-- Iconos -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        /* --- Configuración General --- */
        :root {
            --gold: #D4AF37;
            --gold-light: #FFFACD;
            --gold-dark: #AA8C2C;
            --black: #000; /* Negro puro para la oscuridad inicial */
            --bg-panel: #111111;
        }

        body {
            background-color: var(--black);
            color: var(--gold-light);
            font-family: 'Montserrat', sans-serif;
            overflow-x: hidden;
            margin: 0;
            padding: 0;
        }

        h1, h2, h3, .gold-text {
            font-family: 'Cinzel', serif;
            color: var(--gold);
            text-shadow: 0 2px 4px rgba(0,0,0,0.8);
            background: linear-gradient(to right, #BF953F, #FCF6BA, #B38728, #FBF5B7, #AA771C);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        /* --- INTRO MEJORADA (REALISMO Y EFECTOS) --- */
        #intro-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            /* Fondo que simula una habitación oscura con un punto de luz */
            background: radial-gradient(circle at center, #1a1a1a 0%, #000000 70%);
            z-index: 9999;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            transition: opacity 2s ease, visibility 2s;
            overflow: hidden;
        }
        
        /* Polvo dorado flotante en el fondo */
        .gold-dust {
            position: absolute; width: 100%; height: 100%; pointer-events: none;
            background-image: url('https://www.transparenttextures.com/patterns/stardust.png');
            opacity: 0.3; animation: drift 20s linear infinite;
        }
        @keyframes drift { from { background-position: 0 0; } to { background-position: 100px 100px; } }

        /* Contenedor de la Vela */
        .candle-wrapper {
            position: relative; margin-bottom: 50px; 
            /* Sombra suave de la vela */
            filter: drop-shadow(0 0 5px rgba(255, 255, 255, 0.2));
            /* Aura de la vela proyectada en el suelo */
            box-shadow: 0 30px 100px 50px rgba(255, 200, 0, 0.2); 
            border-radius: 50%; /* para el efecto de suelo */
        }

        .candle-stick {
            width: 50px; height: 180px;
            /* Cera con degradado realista */
            background: linear-gradient(to bottom, #f0f0f0, #e0e0e0 40%, #cccccc);
            border-radius: 6px; position: relative;
            box-shadow: inset -5px 0 10px rgba(0,0,0,0.2), 0 0 10px rgba(255, 255, 255, 0.1);
        }
        
        /* Cera derretida en la parte superior */
        .candle-stick::before {
            content: ''; position: absolute; top: 0; left: 0; right: 0; height: 10px;
            background: radial-gradient(circle, #fff 0%, #eee 40%, #ccc 100%);
            border-radius: 6px 6px 0 0; box-shadow: 0 2px 5px rgba(0,0,0,0.3);
        }

        /* Mecha quemada */
        .wick {
            position: absolute; top: -12px; left: 50%; transform: translateX(-50%);
            width: 4px; height: 15px; background: linear-gradient(#111, #555);
            border-radius: 2px; z-index: 2;
        }

        /* Llama Hiper Realista (Cuerpo + Núcleo) */
        .flame {
            position: absolute; top: -60px; left: 50%; transform: translateX(-50%);
            width: 24px; height: 60px;
            /* Degradado de la llama: Naranja (punta) -> Amarillo (cuerpo) */
            background: linear-gradient(to bottom, rgba(255,100,0,0.1), rgba(255,165,0,0.7) 20%, #ffcc00 50%, #ffedb8 95%);
            border-radius: 50% 50% 20% 20% / 60% 60% 40% 40%;
            filter: blur(1px);
            /* Aura de luz intensa */
            box-shadow: 
                0 0 25px rgba(255, 165, 0, 0.8), /* Glow principal */
                0 0 70px rgba(255, 165, 0, 0.5), /* Glow suave */
                0 0 120px rgba(255, 200, 0, 0.3); /* Aura amplia */
            animation: flicker 2.5s infinite alternate ease-in-out;
            transform-origin: bottom center;
            z-index: 10; transition: all 0.2s; /* Transición rápida para el soplido */
        }

        /* Núcleo caliente (azul/blanco) */
        .flame::after {
            content: ''; position: absolute; bottom: 10%; left: 50%; transform: translateX(-50%);
            width: 30%; height: 40%; 
            /* Núcleo blanco y azulado */
            background: radial-gradient(circle, rgba(255, 255, 255, 0.9) 0%, #87cefa 100%);
            border-radius: 50%; filter: blur(2px); opacity: 0.8;
        }

        @keyframes flicker {
            0%, 100% { transform: translateX(-50%) scale(1) rotate(-1deg); opacity: 0.9; height: 60px; }
            25% { transform: translateX(-50%) scale(1.02) rotate(1deg); opacity: 1; height: 61px; }
            50% { transform: translateX(-50%) scale(0.98) rotate(-0.5deg); opacity: 0.85; height: 59px; }
            75% { transform: translateX(-50%) scale(1.03) rotate(0.5deg); opacity: 1; height: 62px; }
        }

        /* Humo Realista (Post-Soplido) */
        .smoke-container {
            position: absolute; top: -80px; left: 50%; transform: translateX(-50%);
            width: 40px; height: 100px; pointer-events: none; opacity: 0;
            transition: opacity 1s;
        }
        .smoke-puff {
            position: absolute; background: rgba(255,255,255,0.2); border-radius: 50%;
            filter: blur(8px); width: 20px; height: 20px; opacity: 0;
        }

        /* Texto y Botón */
        .wish-text {
            font-family: 'Playfair Display', serif; color: var(--gold-light); font-size: 1.5rem;
            margin-top: 40px; opacity: 0; animation: fadeInText 3s forwards 1s;
            text-align: center; font-style: italic; letter-spacing: 1px;
            text-shadow: 0 0 10px rgba(212, 175, 55, 0.4);
        }
        @keyframes fadeInText { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        .blow-btn {
            margin-top: 30px; padding: 15px 45px;
            /* Diseño de cristal esmerilado / frosted glass effect */
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid var(--gold);
            color: var(--gold-light);
            font-family: 'Cinzel', serif; font-size: 1.1rem; text-transform: uppercase; letter-spacing: 3px;
            cursor: pointer; transition: all 0.4s;
            border-radius: 8px; position: relative; overflow: hidden;
            box-shadow: 0 0 20px rgba(0,0,0,0.7);
            backdrop-filter: blur(10px); /* Desenfoque para el efecto de cristal */
            animation: softGlow 2s infinite alternate; /* Animación de brillo */
        }
        
        @keyframes softGlow {
            0% { box-shadow: 0 0 10px rgba(212, 175, 55, 0.4), 0 0 0 0 rgba(212, 175, 55, 0); }
            100% { box-shadow: 0 0 30px rgba(212, 175, 55, 0.6), 0 0 0 5px rgba(212, 175, 55, 0); }
        }

        .blow-btn::before {
            content: ''; position: absolute; top: 0; left: -100%; width: 100%; height: 100%;
            /* Efecto de destello dorado al pasar el mouse */
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: 0.5s;
        }
        .blow-btn:hover::before { left: 100%; }
        .blow-btn:hover {
            background: rgba(212, 175, 55, 0.15);
            box-shadow: 0 0 40px rgba(212, 175, 55, 0.8); 
            border-color: #fff;
        }

        /* --- Main Content Styles (Manteniendo el resto igual) --- */
        #main-content { opacity: 0; transition: opacity 2s ease; }
        .section-title { text-align: center; font-size: 2.5rem; margin-bottom: 2rem; padding-top: 2rem; }
        @media(max-width: 768px) { .section-title { font-size: 1.8rem; } }

        /* Galería */
        .gallery-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 1.5rem; padding: 2rem; }
        .photo-frame {
            position: relative; background: #000; border: 3px solid var(--gold-dark);
            padding: 5px; border-radius: 4px; box-shadow: 0 4px 15px rgba(0,0,0,0.8);
            transition: transform 0.3s; height: 300px; display: flex; align-items: center; justify-content: center; overflow: hidden;
        }
        .photo-frame:hover { transform: scale(1.03); border-color: var(--gold); z-index: 10; box-shadow: 0 0 20px rgba(212, 175, 55, 0.5); }
        .photo-frame img { max-width: 100%; max-height: 100%; width: auto; height: auto; object-fit: contain; display: block; }
        .hat-deco {
            position: absolute; top: -20px; right: -15px; font-size: 2.5rem;
            transform: rotate(15deg); text-shadow: 2px 2px 5px rgba(0,0,0,0.8); z-index: 20; filter: drop-shadow(0 0 5px gold);
        }

        /* Contadores */
        .stats-container {
            display: flex; flex-wrap: wrap; justify-content: center; gap: 1.5rem; padding: 2rem;
            background: linear-gradient(rgba(0,0,0,0.95), rgba(0,0,0,0.9)), url('https://www.transparenttextures.com/patterns/stardust.png');
        }
        .stat-box {
            background: rgba(20, 20, 20, 0.6); border: 1px solid #333; border-top: 2px solid var(--gold-dark);
            padding: 1.5rem; width: 200px; text-align: center; border-radius: 8px; backdrop-filter: blur(5px); transition: transform 0.3s;
        }
        .stat-box:hover { transform: translateY(-5px); border-color: var(--gold); }
        .stat-number { font-family: 'Cinzel', serif; font-size: 1.8rem; color: var(--gold); display: block; margin-bottom: 0.5rem; }
        .stat-label { font-size: 0.8rem; text-transform: uppercase; letter-spacing: 1px; color: #aaa; }

        /* Periódico */
        .newspaper-section {
            background-color: #f0e6d2; color: #111; padding: 4rem 1rem;
            background-image: url("https://www.transparenttextures.com/patterns/aged-paper.png"); position: relative;
        }
        .newspaper-container {
            max-width: 1200px; mx-auto; background: rgba(255,255,255,0.4);
            padding: 20px; margin: 0 auto; box-shadow: 0 0 20px rgba(0,0,0,0.3);
        }
        .newspaper-header {
            border-bottom: 3px double #000; border-top: 4px solid #000; text-align: center; margin-bottom: 1.5rem; padding: 1.5rem 0;
        }
        .newspaper-header h2 {
            background: none; color: #000; -webkit-text-fill-color: #000;
            font-family: 'Playfair Display', serif; font-weight: 900; font-size: 4rem; text-transform: uppercase; letter-spacing: -1px; line-height: 0.9;
        }
        .newspaper-meta {
            border-bottom: 1px solid #000; padding: 5px 0; margin-bottom: 20px;
            display: flex; justify-content: space-between; font-family: 'Playfair Display', serif; font-style: italic; font-weight: bold; font-size: 1.1rem;
        }
        .newspaper-columns { column-count: 1; column-gap: 2rem; font-family: 'Playfair Display', serif; text-align: justify; }
        @media(min-width: 768px) { .newspaper-columns { column-count: 2; } }
        @media(min-width: 1024px) { .newspaper-columns { column-count: 3; } }
        .fact-item { margin-bottom: 1.5rem; padding-bottom: 1rem; border-bottom: 1px solid #ccc; break-inside: avoid; font-size: 1rem; line-height: 1.5; }
        .fact-item:first-child::first-letter { float: left; font-size: 3.5rem; line-height: 0.8; font-weight: bold; margin-right: 8px; color: #8b0000; }

        /* Agradecimiento */
        .thanks-section { padding: 4rem 1rem; text-align: center; position: relative; display: flex; flex-direction: column; align-items: center; }
        .organizer-frame {
            max-width: 90%; width: 800px; height: 60vh; background: #000; border: 4px double var(--gold);
            box-shadow: 0 0 30px rgba(212, 175, 55, 0.3); padding: 10px; display: flex; justify-content: center; align-items: center; margin: 0 auto;
        }
        .organizer-photo { max-width: 100%; max-height: 100%; width: auto; height: auto; object-fit: contain; }
        .fireworks-btn {
            margin-top: 30px; padding: 20px 50px; background: linear-gradient(45deg, var(--gold-dark), var(--gold));
            border: none; color: black; font-weight: bold; font-family: 'Cinzel', serif; font-size: 1.5rem;
            border-radius: 50px; cursor: pointer; animation: pulse 2s infinite; z-index: 50;
        }
        @keyframes pulse { 0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(212, 175, 55, 0.7); } 70% { transform: scale(1.05); box-shadow: 0 0 0 20px rgba(212, 175, 55, 0); } 100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(212, 175, 55, 0); } }
        #canvas-container { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 10000; }

        /* Footer */
        .footer-bubbles {
            height: 500px; position: relative; overflow: hidden; background: radial-gradient(circle at bottom, #1a1a1a, #000);
            border-top: 2px solid var(--gold-dark); display: flex; flex-direction: column; justify-content: flex-end; align-items: center; padding-bottom: 10px;
        }
        .bubble {
            position: absolute; bottom: -50px; background: rgba(212, 175, 55, 0.15); border: 1px solid rgba(212, 175, 55, 0.6);
            border-radius: 50%; color: var(--gold-light); display: flex; justify-content: center; align-items: center;
            font-family: 'Cinzel', serif; font-size: 0.9rem; box-shadow: 0 0 15px rgba(212, 175, 55, 0.3);
            animation: floatUp linear infinite; pointer-events: none;
        }
        @keyframes floatUp { 0% { transform: translateY(0) rotate(0deg); opacity: 0; } 10% { opacity: 1; } 90% { opacity: 1; } 100% { transform: translateY(-500px) rotate(360deg); opacity: 0; } }

        .gift-wrapper { position: relative; width: 120px; height: 120px; margin-bottom: 30px; z-index: 20; cursor: pointer; }
        .gift-box { width: 100%; height: 80%; position: absolute; bottom: 0; background: linear-gradient(135deg, #D4AF37, #AA8C2C); border-radius: 4px; box-shadow: 0 0 30px rgba(212, 175, 55, 0.2); }
        .gift-lid { width: 110%; height: 25%; position: absolute; top: 10%; left: -5%; background: linear-gradient(135deg, #FBF5B7, #D4AF37); border-radius: 4px; box-shadow: 0 5px 15px rgba(0,0,0,0.4); transform-origin: top center; animation: openBox 4s infinite ease-in-out; }
        .gift-ribbon-v { width: 18%; height: 100%; background: #800000; position: absolute; left: 41%; }
        .gift-ribbon-h { width: 100%; height: 18%; background: #800000; position: absolute; top: 41%; }
        .gift-glow { position: absolute; top: 20%; left: 10%; width: 80%; height: 10px; background: white; filter: blur(20px); opacity: 0; animation: glowEffect 4s infinite ease-in-out; }
        .gift-floater { position: absolute; top: 0; left: 0; width: 100%; text-align: center; font-size: 2rem; color: var(--gold-light); opacity: 0; animation: floatOut 4s infinite ease-in-out; }
        @keyframes openBox { 0%, 10% { transform: rotateX(0) translateY(0); } 40%, 60% { transform: rotateX(45deg) translateY(-20px); } 90%, 100% { transform: rotateX(0) translateY(0); } }
        @keyframes glowEffect { 0%, 10% { opacity: 0; } 40%, 60% { opacity: 0.8; box-shadow: 0 0 50px gold; } 90%, 100% { opacity: 0; } }
        @keyframes floatOut { 0%, 15% { transform: translateY(20px) scale(0.5); opacity: 0; } 50% { transform: translateY(-60px) scale(1.2); opacity: 1; } 85%, 100% { transform: translateY(-80px) scale(0); opacity: 0; } }
        
        .copyright { width: 100%; text-align: center; padding: 20px; font-size: 0.8rem; color: #444; border-top: 1px solid #222; margin-top: 20px; font-family: monospace; }

    </style>
</head>
<body>

    <!-- Reproductor de Musica Invisible -->
    <div id="player" style="position: absolute; top: -9999px; visibility: hidden;"></div>

    <!-- Canvas para fuegos artificiales (z-index alto para estar encima de todo al final) -->
    <canvas id="canvas-container"></canvas>

    <!-- SECCIÓN INTRO MEJORADA -->
    <div id="intro-overlay">
        <div class="gold-dust"></div>
        
        <!-- El aura de la vela está aquí, envolviendo el componente -->
        <div class="candle-wrapper">
            <div class="candle-stick"></div>
            <div class="wick"></div>
            <!-- Llama compleja -->
            <div class="flame" id="flame"></div>
            <!-- Humo -->
            <div class="smoke-container" id="smoke-container">
                <!-- Partículas de humo generadas por JS -->
            </div>
        </div>

        <div class="wish-text">
            "Cierra los ojos y pide un deseo..."
        </div>

        <button class="blow-btn" onclick="blowCandle()">
            <i class="fas fa-wind mr-2"></i> Soplar Vela
        </button>
    </div>

    <!-- CONTENIDO PRINCIPAL -->
    <main id="main-content" class="hidden">
        
        <!-- Sección 1: Galería -->
        <section id="gallery" class="min-h-screen py-10">
            <h1 class="section-title" data-aos="fade-up">Estamos llegando al final</h1>
            <p class="text-center text-gray-300 mb-8 max-w-2xl mx-auto px-4">
                Cada imagen es un fragmento de eternidad. <br>
                <span class="text-xs text-gray-500">Fotos con la cumplañera</span>
            </p>
            
            <div class="gallery-grid" id="photo-grid"></div>
        </section>

        <!-- Sección 2: Contador -->
        <section id="life-counter" class="py-16 bg-black">
            <h2 class="section-title">Una Vida de Oro</h2>
            <p class="text-center text-gold mb-8 font-serif italic">Iniciada el 17 de Octubre de 1975</p>
            
            <div class="stats-container">
                <div class="stat-box"> <span id="stat-days" class="stat-number">0</span> <span class="stat-label">Días Vividos</span> </div>
                <div class="stat-box"> <span id="stat-hours" class="stat-number">0</span> <span class="stat-label">Horas de Experiencias</span> </div>
                <div class="stat-box"> <span id="stat-beats" class="stat-number">0</span> <span class="stat-label">Latidos (Millones)</span> </div>
                <div class="stat-box"> <span id="stat-breaths" class="stat-number">0</span> <span class="stat-label">Respiraciones</span> </div>
                <div class="stat-box"> <span id="stat-walk" class="stat-number">0</span> <span class="stat-label">Km Caminados (Aprox)</span> </div>
                <div class="stat-box"> <span id="stat-sleep" class="stat-number">0</span> <span class="stat-label">Horas de Sueño</span> </div>
                <div class="stat-box"> <span id="stat-meals" class="stat-number">0</span> <span class="stat-label">Comidas Disfrutadas</span> </div>
                <div class="stat-box"> <span id="stat-moons" class="stat-number">0</span> <span class="stat-label">Lunas Llenas</span> </div>
                <div class="stat-box"> <span id="stat-words" class="stat-number">0</span> <span class="stat-label">Palabras Dichas (Millones)</span> </div>
                <div class="stat-box"> <span id="stat-sun" class="stat-number">0</span> <span class="stat-label">Vueltas al Sol</span> </div>
                <div class="stat-box"> <span id="stat-seasons" class="stat-number">0</span> <span class="stat-label">Primaveras</span> </div>
            </div>
        </section>

        <!-- Sección 3: Periódico -->
        <section id="newspaper" class="newspaper-section">
            <div class="newspaper-container">
                <div class="newspaper-header">
                    <h2>The 1975 Chronicle</h2>
                </div>
                <div class="newspaper-meta">
                    <span>Viernes, 17 de Octubre, 1975</span> <span>Edición Especial: Datos del dia de tu nacimiento</span> <span>Vol. I - No. 1</span>
                </div>
                <div class="text-center mb-8 border-b-2 border-black pb-4 font-bold font-serif text-xl italic">
                    "¡EXTRA! ¡EXTRA! El mundo cambia para siempre en este día histórico."
                </div>
                <div class="newspaper-columns" id="facts-container"></div>
            </div>
        </section>

        <!-- Sección 4: Agradecimiento -->
        <section id="special-thanks" class="thanks-section">
            <h2 class="section-title mb-6">Agradecimiento Especial</h2>
            <p class="text-xl mb-8 text-gray-300">A la que organizo todo el evento</p>
            <div class="organizer-frame">
                <img src="https://images.unsplash.com/photo-1530103862676-de3c9da59af7?q=80&w=2000&auto=format&fit=crop" alt="Organizadora" class="organizer-photo" id="organizer-img">
            </div>
            <p class="text-sm text-gray-500 mt-4"></p>
            <div class="mt-10">
                <button class="fireworks-btn" onclick="launchFinale()"> Toca aquí <i class="fas fa-hand-sparkles ml-2"></i> </button>
            </div>
        </section>

        <!-- Sección 5: Footer -->
        <footer class="footer-bubbles" id="footer-bubbles">
            <div class="gift-wrapper">
                <div class="gift-glow"></div>
                <div class="gift-floater"><i class="fas fa-heart"></i></div>
                <div class="gift-box"> <div class="gift-ribbon-v"></div> <div class="gift-ribbon-h"></div> </div>
                <div class="gift-lid"> <div class="gift-ribbon-v"></div> </div>
            </div>
            <div class="footer-signature mb-4 text-xl text-gold font-serif"> Paz · Salud · Amor </div>
            <div class="copyright"> Página creada por Lautyy33 </div>
        </footer>
    </main>

    <!-- SCRIPTS -->
    <script>
        // --- 1. Configuración de YouTube ---
        var tag = document.createElement('script');
        tag.src = "https://www.youtube.com/iframe_api";
        var firstScriptTag = document.getElementsByTagName('script')[0];
        firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

        var player;
        function onYouTubeIframeAPIReady() {
            player = new YT.Player('player', {
                height: '0', width: '0', videoId: 'LHCob76kigA',
                playerVars: { 'playsinline': 1, 'controls': 0, 'loop': 1, 'playlist': 'LHCob76kigA' },
                events: { 'onReady': onPlayerReady }
            });
        }
        function onPlayerReady(event) {}

        // --- 2. Animación Vela MEJORADA ---
        function blowCandle() {
            const flame = document.getElementById('flame');
            const smokeContainer = document.getElementById('smoke-container');
            const overlay = document.getElementById('intro-overlay');
            const main = document.getElementById('main-content');
            const blowBtn = document.querySelector('.blow-btn');

            // Desactivar el botón para evitar doble click
            blowBtn.disabled = true;
            blowBtn.innerText = '¡DESEO CONCEDIDO!';
            blowBtn.classList.remove('blow-btn:hover'); // Remover hover effect

            // 1. Efecto de soplido (la llama tiembla violentamente)
            flame.style.animation = "none"; // Detener el flicker normal
            flame.style.transform = "translateX(-50%) scale(0.2) skewX(20deg)";
            flame.style.opacity = "0";

            setTimeout(() => {
                // 2. Apagar, sin transición para que sea inmediato
                flame.style.display = 'none';
                
                // 3. Generar humo realista
                smokeContainer.style.opacity = '1';
                for(let i=0; i<8; i++) {
                    createSmokeParticle(smokeContainer, i);
                }
                
                // 4. Oscuridad total breve
                overlay.style.background = "#000";
                
                // 5. Música (Inicio de la fiesta)
                if(player && player.playVideo) {
                    player.playVideo();
                    player.setVolume(60);
                }

                // 6. Confeti (Detrás de la oscuridad)
                createConfetti();

                // 7. Transición a contenido principal
                setTimeout(() => {
                    overlay.style.opacity = '0';
                    overlay.style.visibility = 'hidden';
                    main.classList.remove('hidden');
                    main.style.opacity = '1';
                    // Inicializar todo el contenido
                    initGallery(); initCounters(); initFacts(); initBubbles();
                }, 1500); // 1.5 segundos para ver el humo y la oscuridad

            }, 200); // Breve delay para simular el soplido
        }

        function createSmokeParticle(container, i) {
            const puff = document.createElement('div');
            puff.className = 'smoke-puff';
            // Posición aleatoria pequeña
            const offset = (Math.random() - 0.5) * 20;
            puff.style.left = `calc(50% + ${offset}px)`;
            puff.style.bottom = '0px';
            
            // Animación manual con JS para más control o CSS
            puff.style.transition = `all ${1.5 + Math.random()}s ease-out`;
            puff.style.transitionDelay = `${i * 0.1}s`;
            
            container.appendChild(puff);

            // Trigger animación
            setTimeout(() => {
                puff.style.opacity = '0.4';
                puff.style.transform = `translateY(-${100 + Math.random()*50}px) scale(${2 + Math.random()})`;
                puff.style.filter = `blur(${5 + Math.random()*5}px)`;
            }, 50);

            // Fade out final
            setTimeout(() => {
                puff.style.opacity = '0';
                puff.remove();
            }, 1000 + i*100);
        }

        // --- 3. Galería (sin cambios) ---
        function initGallery() {
            const grid = document.getElementById('photo-grid');
            const imageFolder = './img/'; 
            const placeholder = 'https://via.placeholder.com/400x600/111/D4AF37?text=Foto+'; 
            const icons = ['fa-birthday-cake', 'fa-gift', 'fa-star', 'fa-glass-cheers', 'fa-crown'];

            if (grid.children.length === 0) {
                for (let i = 1; i <= 55; i++) {
                    const div = document.createElement('div');
                    div.className = 'photo-frame';
                    // PARA PRODUCCIÓN: cambiar a `${imageFolder}cuadro${i}.png`
                    const imgSrc = `${placeholder}${i}`; 
                    const randomIcon = icons[Math.floor(Math.random() * icons.length)];

                    div.innerHTML = `
                        <div class="hat-deco text-gold"><i class="fas ${randomIcon}"></i></div>
                        <img src="${imgSrc}" alt="Recuerdo ${i}" onerror="this.src='https://via.placeholder.com/400?text=Error'">
                    `;
                    grid.appendChild(div);
                }
            }
        }

        // --- 4. Contadores (sin cambios) ---
        let counterInterval;
        function initCounters() {
            if (counterInterval) return; // Evitar inicializar dos veces
            
            const birthDate = new Date('1975-10-17T00:00:00');
            counterInterval = setInterval(() => {
                const now = new Date();
                const diffTime = Math.abs(now - birthDate);
                const days = Math.floor(diffTime / (1000 * 60 * 60 * 24));
                const hours = Math.floor(diffTime / (1000 * 60 * 60));
                const totalMinutes = Math.floor(diffTime / (1000 * 60));
                
                const beats = (totalMinutes * 80 / 1000000).toFixed(2); 
                const breaths = (totalMinutes * 16).toLocaleString();
                const sunTrips = Math.floor(days / 365.25);
                
                const kmWalked = Math.floor(days * 5).toLocaleString();
                const sleepHours = Math.floor(hours / 3).toLocaleString();
                const meals = (days * 3).toLocaleString();
                const moons = Math.floor(days / 29.53).toLocaleString();
                const words = (days * 16000 / 1000000).toFixed(1);

                document.getElementById('stat-days').innerText = days.toLocaleString();
                document.getElementById('stat-hours').innerText = hours.toLocaleString();
                document.getElementById('stat-beats').innerText = beats + " M";
                document.getElementById('stat-breaths').innerText = breaths;
                document.getElementById('stat-sun').innerText = sunTrips;
                document.getElementById('stat-seasons').innerText = (sunTrips * 4).toLocaleString();
                document.getElementById('stat-walk').innerText = kmWalked;
                document.getElementById('stat-sleep').innerText = sleepHours;
                document.getElementById('stat-meals').innerText = meals;
                document.getElementById('stat-moons').innerText = moons;
                document.getElementById('stat-words').innerText = words + " M";
            }, 1000);
        }

        // --- 5. Datos Curiosos (sin cambios) ---
        function initFacts() {
            const container = document.getElementById('facts-container');
             if (container.children.length > 0) return; // Evitar inicializar dos veces

            const facts = [
                "Naciste un Viernes.", "Canción #1: 'Bad Blood' de Neil Sedaka.", "Presidente EE.UU: Gerald Ford.",
                "Se fundó Microsoft.", "Estreno de 'Tiburón'.", "Signo: Libra.", "Piedra: Ópalo.",
                "Fin Guerra Vietnam.", "Queen lanza 'Bohemian Rhapsody'.", "Estreno 'Wheel of Fortune'.",
                "Nacen: Angelina Jolie, David Beckham.", "Casa promedio: $39,300.", "Gasolina: 44 centavos.",
                "Población: 4 mil millones.", "Lanzamiento BetaMax.", "Estreno 'Saturday Night Live'.",
                "Boda Liz Taylor & R. Burton.", "Día mundial contra el dolor.", "Flor: Caléndula.",
                "A. Ashe gana Wimbledon.", "Esperanza vida: 72 años.", "Descubrimiento Phoebe.",
                "C. Chaplin Caballero.", "Springsteen: 'Born to Run'.", "Bill Gates & Altair 8800.",
                "Patente Cubo Rubik.", "Estreno 'Rocky Horror Picture Show'.", "Vuelos Concorde.",
                "Sondas Viking a Marte.", "Nace Tiger Woods.", "Salario medio: $8,600.", "Primer PC IBM 5100.",
                "Inicio moda Disco.", "Números suerte: 6, 15, 24.", "Numerología 17: Negocios.", "Color: Naranja Quemado.",
                "Led Zeppelin Earls Court.", "Éxito Steven Spielberg.", "Guerra VHS vs Betamax.",
                "Venta Pet Rock.", "Bob Marley: 'No Woman, No Cry'.", "Transición española.", "Año Int. Mujer.",
                "Fundación Iron Maiden.", "Ali vs Frazier III.", "Al Capone (1931).",
                "Planeta: Venus.", "Elemento: Aire.", "Pink Floyd: 'Wish You Were Here'.", "Generación X."
            ];
            facts.forEach(fact => {
                const div = document.createElement('div');
                div.className = 'fact-item';
                div.innerText = fact;
                container.appendChild(div);
            });
        }

        // --- 6. Canvas (Confeti y Cohetes) (sin cambios funcionales) ---
        const canvas = document.getElementById('canvas-container');
        const ctx = canvas.getContext('2d');
        let particles = [];
        function resizeCanvas() { canvas.width = window.innerWidth; canvas.height = window.innerHeight; }
        window.addEventListener('resize', resizeCanvas); resizeCanvas();

        function createConfetti() {
            for(let i=0; i<100; i++) {
                particles.push({
                    x: window.innerWidth / 2, y: window.innerHeight / 2,
                    vx: (Math.random() - 0.5) * 20, vy: (Math.random() - 0.5) * 20,
                    color: `hsl(${Math.random()*360}, 100%, 50%)`,
                    alpha: 1, size: Math.random() * 10, type: 'confetti'
                });
            }
            animateCanvas();
        }

        function launchFinale() {
            document.getElementById('footer-bubbles').scrollIntoView({behavior: 'smooth'});
            let count = 0;
            const interval = setInterval(() => { createFirework(); count++; if(count > 15) clearInterval(interval); }, 300);
        }

        function createFirework() {
            const x = Math.random() * canvas.width;
            const y = canvas.height;
            const targetY = Math.random() * (canvas.height / 2);
            particles.push({
                x: x, y: y, targetY: targetY, vx: 0, vy: -15,
                color: `hsl(${40 + Math.random()*20}, 100%, 50%)`, type: 'rocket', alpha: 1
            });
            if(!animationRunning) animateCanvas();
        }

        function explode(x, y) {
            for(let i=0; i<50; i++) {
                const angle = Math.random() * Math.PI * 2;
                const speed = Math.random() * 5;
                particles.push({
                    x: x, y: y, vx: Math.cos(angle) * speed, vy: Math.sin(angle) * speed,
                    color: `hsl(${Math.random()*360}, 100%, 70%)`, alpha: 1, decay: 0.02, type: 'spark'
                });
            }
        }

        let animationRunning = false;
        function animateCanvas() {
            animationRunning = true;
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            particles.forEach((p, index) => {
                if (p.type === 'confetti') { p.x += p.vx; p.y += p.vy; p.vy += 0.5; p.alpha -= 0.01; }
                else if (p.type === 'rocket') {
                    p.x += p.vx; p.y += p.vy;
                    if (p.y <= p.targetY) { explode(p.x, p.y); particles.splice(index, 1); return; }
                } else if (p.type === 'spark') { p.x += p.vx; p.y += p.vy; p.vy += 0.1; p.alpha -= p.decay; }

                ctx.globalAlpha = p.alpha; ctx.fillStyle = p.color;
                if (p.type === 'confetti') ctx.fillRect(p.x, p.y, p.size, p.size);
                else { ctx.beginPath(); ctx.arc(p.x, p.y, 3, 0, Math.PI * 2); ctx.fill(); }
            });
            particles = particles.filter(p => p.alpha > 0);
            if (particles.length > 0) requestAnimationFrame(animateCanvas);
            else { animationRunning = false; ctx.clearRect(0, 0, canvas.width, canvas.height); }
        }

        // --- 7. Burbujas (sin cambios funcionales) ---
        function initBubbles() {
            const container = document.getElementById('footer-bubbles');
            const words = ['Paz', 'Salud', 'Amor', 'Amistad', 'Alegría', 'Fortuna', 'Éxito', 'Unión', 'Viajes', 'Risas'];
            setInterval(() => {
                const bubble = document.createElement('div'); bubble.className = 'bubble';
                bubble.innerText = words[Math.floor(Math.random() * words.length)];
                const size = Math.random() * 60 + 40;
                bubble.style.width = `${size}px`; bubble.style.height = `${size}px`;
                bubble.style.left = `${Math.random() * 90}%`;
                bubble.style.animationDuration = `${Math.random() * 5 + 5}s`;
                container.appendChild(bubble);
                setTimeout(() => { bubble.remove(); }, 10000);
            }, 800);
        }
    </script>
</body>

</html>

